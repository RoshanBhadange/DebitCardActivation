pipeline {
    agent any
    tools {
            maven 'Maven-3.6.3'
        }
    stages {
    stage('Build') {
        steps {
            script {
                bat 'start /B mvn clean install'
            }
        }
    }
    stage('Test') {
        steps {
            echo 'Unit test'
        }
    }
    stage ('Run Script') {
        steps {
             echo 'Run spark-submit command'
                            bat '''
                                D:\\gnral_soft\\spark3\bin\\spark-submit \
                                    --class src/main/scala/DebitCardActivation.scala \
                                    --master yarn \
                                    --deploy-mode client \
                                    target/DebitCardActivation.jar
                            '''
        }

    }
}
post {
        success {
            echo 'Pipeline succeeded!'
        }
        failure {
            echo 'Pipeline failed!'
        }
    }

}