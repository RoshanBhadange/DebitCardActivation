pipeline {
    agent any
    environment {
            SPARK_HOME = 'D:\\gnral_soft\\spark3'
        }
    tools {
            maven 'Maven-3.6.3'
        }
    stages {
    stage('Build') {
        steps {
            script {
                bat 'start /B mvn clean install'
            }
        }
    }
    stage('Test') {
        steps {
            echo 'Unit test'
        }
    }
    stage ('Run Script') {
        steps {
             echo 'Run spark-submit command'

                            def sparkSubmitCmd = "${SPARK_HOME}\bin\spark-submit --class src.main.scala.DebitCardActivation.scala --master yarn --deploy-mode client C:\\Users\\91866\\IdeaProjects\\DebitCardActivation1\\target\\DebitCardActivation.jar"
                            bat sparkSubmitCmd
        }

    }
}
post {
        success {
            echo 'Pipeline succeeded!'
        }
        failure {
            echo 'Pipeline failed!'
        }
    }

}