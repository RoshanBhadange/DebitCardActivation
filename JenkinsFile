pipeline {
    agent any
        stages {
        stage('Build') {
            steps {
                script {
                    sh '/maven/lib/maven3/bin/mvn clean install'
                }

            }
        }
        stage('Test') {
            steps {
                echo 'Unit test'
            }
        }
        stage ('Run Script') {
            steps {
                 echo 'Run spark-submit command'
                                sh '''
                                    spark-submit \
                                        --class src/main/scala/DebitCardActivation.scala \
                                        --master yarn \
                                        --deploy-mode client \
                                        target/DebitCardActivation.jar
                                '''
            }

        }
    }
    post {
            success {
                echo 'Pipeline succeeded!'
            }
            failure {
                echo 'Pipeline failed!'
            }
        }

}